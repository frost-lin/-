/******************** (C) COPYRIGHT 2018 *****************************************
 * 文件名  ：main.c
 * 描述    ：  
 * 硬件配置:              
 * 版本    ： 
 * 修改日期： 
 * 作者    ：Wu
 * 修改日志：
*********************************************************************************/
#include "stm32f10x.h"
#include <stdio.h>
#include "delay.h"
#include "led.h"
#include "sys.h"
#include "usart.h"
#include "adc.h"
#include "24l01.h"
#include "mpu6050.h"
#include "dma.h"
#include "timer.h"

#define data_len 8*9

static u16 data0[7200]= {3,4,3,3,2,2,4,3,3,3,3,2,2,3,2,0,2,3,3,2,4,0,2,2,2,4,5,0,4,4,3,4,1,2,2,4,0,0,2,2,4,5,4,4,1,0,2,2,4,3,2,3,1,2,2,2,0,0,3,3,1027,0,0,0,3,2,0,40,240,0,0,2,
1,4,3,4,3,3,3,4,2,2,4,3,2,2,2,0,2,3,3,2,4,0,2,2,2,4,5,0,4,4,3,4,1,2,2,4,0,0,2,2,4,5,4,4,1,0,2,2,4,3,2,3,1,2,2,2,0,0,3,4,3,0,0,0,2,3,0,40,103,0,5,3,
1,4,3,4,3,3,3,4,2,2,4,3,2,2,4,2,2,2,2,4,2,0,3,4,2,2,5,0,3,3,4,2,2,3,1,1,0,0,2,2,2,3,12,5,1,0,3,1,3,3,3,4,1,2,2,2,0,0,3,4,3,0,0,0,2,3,0,40,103,0,5,3,
1,2,4,3,4,3,2,3,3,1,3,4,2,3,4,2,2,2,2,4,2,0,3,4,2,2,5,0,3,3,4,2,2,3,1,1,0,0,2,2,2,3,12,5,1,0,3,1,3,3,3,4,1,2,2,2,0,0,2,4,3,2,0,0,3,3,0,32,20,4,3,2,
1,2,4,3,4,3,2,3,3,1,3,4,2,3,2,2,4,2,2,2,1,0,2,3,4,3,4,0,4,2,2,0,1,4,2,1,0,0,2,2,1,4,11,4,3,0,2,2,3,4,3,0,2,3,2,2,0,0,2,4,3,2,0,0,3,3,0,32,20,4,3,2,
2,3,2,2,2,4,2,2,2,2,3,3,3,3,2,2,4,2,2,2,1,0,2,3,4,3,4,0,4,2,2,0,1,4,2,1,0,0,2,2,1,4,11,4,3,0,2,2,3,4,3,0,2,3,2,2,0,0,2,4,3,2,0,0,3,3,0,20,15,4,0,2,
2,3,2,2,2,4,2,2,2,2,3,3,3,3,2,2,4,2,2,2,1,0,2,3,4,3,4,0,4,2,2,0,1,4,2,1,0,0,2,3,2,6,11,4,4,0,4,2,2,2,4,2,3,4,3,2,0,0,2,3,4,2,0,0,2,3,0,20,15,4,0,2,
2,2,2,2,2,4,4,2,3,1,1,2,3,3,1,1,3,4,2,1,3,0,2,2,2,2,3,0,5,2,2,2,2,2,3,3,0,0,2,3,2,6,11,4,4,0,4,2,2,2,4,2,3,4,3,2,0,0,2,3,4,2,0,0,2,3,0,20,15,4,0,2,
2,2,2,2,2,4,4,2,3,1,1,2,3,3,1,1,3,4,2,1,3,0,2,2,2,2,3,0,5,2,2,2,2,2,3,3,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,2,2,2,2,0,4,3,3,0,11,5,2,0,3,
4,4,2,3,2,2,3,2,4,3,3,2,1,1,2,1,3,3,2,4095,2,1,1,2,2,0,4,2,4,3,2,2,4,3,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,2,2,2,2,0,4,3,3,0,11,5,2,0,3,
4,4,2,3,2,2,3,2,4,3,3,2,1,1,2,1,3,3,2,4095,3,0,2,1,1,2,2,0,4,2,4,3,2,2,4,3,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
4,4,2,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,0,0,3,2,2,3,10,4,3,3,3,3,3,2,2,2,2,4,4,2,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,3,5,10,2,6,5,4,4,10,3,9,7,4,12,11,4,9,4,7,9,2,9,128,0,0,2,4,6,15,16,3,14,5,11,13,3,12,17,454,2824,8,2771,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,4,2,4095,0,0,2,2,2781,97,0,20,12,4,2265,583,0,19,3,983,220,0,3,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,4,2,4095,0,0,2,2,2781,97,0,20,12,4,2265,583,0,19,3,983,220,0,3,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,4,2,4095,0,0,2,2,2781,97,0,20,12,4,2265,583,0,19,3,983,220,0,3,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,4,2,4095,0,0,2,2,2781,97,0,20,12,4,2265,583,0,19,3,983,220,0,3,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,4,2,4095,0,0,2,2,2781,97,0,20,12,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,8192,9,74,1,8,4,14,13,2,12,3,120,50,0,10,0,2409,2826,5,2133,0,0,5,2,3,3,4,82,0,8,4,30,2796,0,2204,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,0,0,0,0,0,2,13,9,3,4,2,10,6,3,4,3,4,6,2,3,0,0,0,0,0,4,12,8,2,3,3,22,182,0,7,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,0,0,0,0,0,2,13,9,3,4,2,10,6,3,4,3,4,6,2,3,0,0,0,0,0,4,12,8,2,3,3,22,182,0,7,4,
5,10,3,4,5,9,2,4,4,7,11,2,2,0,0,0,0,0,0,0,3,2798,1486,0,389,0,4,2797,2262,4095,468,3,2151,1124,0,533,0,0,0,0,0,2,2,4,3,2,6,4,3,2,2,5,5,3,2,2,0,0,0,0,0,4,4,3,2,2,2,4,96,0,2,2,
5,10,3,1372,393,4,3,0,224,0,2,3,3,3,0,0,0,0,0,0,506,1507,34,2,0,0,552,160,0,3,0,4,0,4,3,3,0,0,0,0,0,2,2,4,3,2,6,4,3,2,2,5,5,3,2,2,0,0,0,0,0,4,4,3,2,2,2,4,96,0,2,2,
16,2,2,1372,393,4,3,0,224,0,2,3,3,3,0,0,0,0,0,0,506,1507,34,2,0,0,552,160,0,3,0,4,0,4,3,3,0,0,0,0,0,4,0,3,4,3,3,3,2,3,2,2,3,4,3,2,0,0,0,0,0,4,0,0,3,2,0,25,229,0,0,2,
3,2,2,3,3,4,3,3,3,0,3,3,3,4,0,0,32770,0,0,0,18,378,6,4,0,0,328,60,0,2,0,2,2,3,4,3,0,0,0,0,0,4,0,3,4,3,3,3,2,3,2,2,3,4,3,2,0,0,0,0,0,4,0,0,3,2,0,25,229,0,0,2,
3,2,2,3,3,4,3,3,3,0,3,3,3,4,0,0,32770,0,0,0,18,378,6,4,0,0,328,60,0,2,0,2,2,3,4,3,0,0,0,0,0,2,0,3,4,4,4,4,2,2,3,2,2,3,4,3,0,0,0,0,0,3,0,0,4,3,0,46,167,0,0,3,
2,3,3,3,2,3,4,4,4,0,4,3,2,4,0,0,0,0,0,0,4,300,3,2,0,0,2,25,5,2,2,4,2,2,2,3,0,0,0,0,0,2,0,3,4,4,4,4,2,2,3,2,2,3,4,3,0,0,0,0,0,3,0,0,4,3,0,46,167,0,0,3,
2,3,3,3,2,3,4,4,4,0,4,3,2,4,0,0,0,0,0,0,4,300,3,2,0,0,2,25,5,2,2,4,2,2,2,3,0,0,0,0,4,4,0,3,3,4,2,4,4,3,2,3,1,3,4,3,0,0,0,0,0,2,0,0,4,4,4,48,98,0,0,3,
2,4,4,3,2,3,1,3,2,0,2,1,2,1,0,0,0,0,0,0,3,232,3,3,0,0,13,20,5,4,4,4,2,2,2,4,0,0,0,0,4,4,0,3,3,4,2,4,4,3,2,3,1,3,4,3,0,0,0,0,0,2,0,0,4,4,4,48,98,0,0,3,
2,4,4,3,2,3,1,3,2,0,2,1,2,1,0,0,0,0,0,0,3,232,3,3,0,0,13,20,5,4,4,4,2,2,2,4,0,0,0,0,4,4,0,3,3,4,2,3,4,4,3,4,2,3,2,3,0,0,0,0,0,3,0,0,3,4,3,39,31,2,0,3,
2,4,4,3,2,2,1,2,3,0,3,3,1,2,0,32,4095,0,0,0,3,137,5,3,0,0,9,20,4,3,0,3,3,3,2,2,0,0,0,0,1,3,0,3,2,3,2,3,4,4,3,4,2,3,2,3,0,0,0,0,0,3,0,0,3,4,3,39,31,2,0,3,
2,3,2,3,2,2,1,2,3,0,3,3,1,2,0,32,4095,0,0,0,3,137,5,3,0,0,9,20,4,3,0,3,3,3,2,2,0,0,0,0,1,3,0,3,2,3,2,3,4,4,3,4,2,3,2,3,0,72,0,163,3,4,0,0,2,2,3,44,70,0,0,2,
2,3,2,3,2,2,1,2,3,0,3,3,1,2,3,20,3,67,2,7,3,82,4,4,0,0,11,20,4,3,0,2,4,4,3,2,0,0,2,3,3,2,0,4,2,3,2,2,2,3,4,3,2,2,2,2,0,72,0,163,3,4,0,0,2,2,3,44,70,0,0,2,
1,2,2,3,3,4,2,2,2,0,4,3,2,3,2,4,3,2,2,2,3,0,2,4,3,3,8,24,4,3,0,2,2,4,3,3,0,0,3,3,2,2,2,4,4,3,4,3,3,2,4,2,2,3,2,3,0,0,2,2,7,2,0,3,3,3,3,16,3,3,0,2,
2,2,2,2,3,3,2,3,2,2,2,4,3,3,2,4,3,2,2,2,3,0,2,4,3,3,8,24,4,3,0,2,2,4,3,3,0,0,3,3,2,2,2,4,4,3,4,3,3,2,4,2,2,3,2,3,0,0,2,2,2,2,0,3,3,3,3,16,3,2,0,3,
2,2,2,2,3,3,2,3,2,2,2,4,3,3,2,4,3,2,2,2,3,0,2,4,3,3,6,22,4,2,0,2,2,2,4,4,0,0,4,2,2,2,0,2,3,4,4,4,2,2,2,2,2,3,3,2,0,0,2,2,2,2,0,3,3,3,3,16,3,2,0,3,
2,2,2,2,1,4,4,2,4,2,2,2,4,3,2,0,3,4,2,2,4,0,2,2,3,3,6,22,4,2,0,2,2,2,4,4,0,0,4,2,2,2,0,2,3,4,4,4,2,2,2,2,2,3,3,2,0,0,2,2,2,2,0,3,3,3,4,16,4,2,0,2,
2,2,2,2,1,4,4,2,4,2,2,2,4,3,2,0,3,4,2,2,4,0,2,2,3,3,4,25,5,4,0,4,2,2,3,3,0,0,3,4,2,3,0,3,3,3,3,3,3,1,1,3,1,2,2,3,0,0,3,2,1,3,0,2,2,2,4,16,4,2,0,2,
3,3,3,3,1,3,3,3,3,3,2,3,2,3,2,0,1,4,4,2,3,0,1,3,2,4,4,25,5,4,0,4,2,2,3,3,0,0,3,4,2,3,0,3,3,3,3,3,3,1,1,3,1,2,2,3,0,0,3,2,1,3,0,2,2,2,4,16,4,2,0,2,
3,3,3,3,1,3,3,3,3,3,2,3,2,3,2,0,1,4,4,2,3,0,1,3,2,4,4,25,5,4,0,4,2,2,3,3,0,0,1,2,2,3,5,3,1,2,2,2,3,2,2,3,1,2,2,3,0,0,3,4,2,2,0,2,4,3,4,17,4,2,0,3,
2,4,4,3,1,3,2,4,3,3,3,2,2,3,3,0,2,2,3,3,2,0,2,2,2,2,5,24,4,3,0,3,2,2,2,2,0,0,1,2,2,3,5,3,1,2,2,2,3,2,2,3,1,2,2,3,0,0,3,4,2,2,0,2,4,3,4,17,4,2,0,3,
2,4,4,3,1,3,2,4,3,3,3,2,2,3,3,0,2,2,3,3,2,0,2,2,2,2,5,24,4,3,0,3,2,2,2,2,0,0,2,1,2,3,5,4,1,2,2,2,4,4,4,4,2,2,3,4,0,0,3,4,2,3,0,2,2,3,2,16,4,3,0,4,
1,3,3,3,3,2,2,2,2,2,4,4,3,2,3,1,2,3,2,4,3,0,2,2,2,2,4,25,3,2,0,3,2,3,2,2,0,0,2,1,2,3,5,4,1,2,2,2,4,4,4,4,2,2,3,4,0,0,3,4,2,3,0,2,2,3,2,16,4,3,0,4,
1,3,3,3,3,2,2,2,2,2,4,4,3,2,3,1,2,3,2,4,3,0,2,2,2,2,4,25,3,2,0,3,2,3,2,2,0,0,2,1,2,3,5,4,1,2,2,3,2,4,4,3,4,2,2,2,0,0,2,4,4,4,0,2,2,2,3,11,5,3,0,3,
1,3,3,2,4,4,3,2,2,3,3,3,4,3,2,2,3,2,2,3,3,0,2,2,3,0,3,0,4,1,3,2,2,3,2,1,0,0,2,3,3,2,0,4,2,2,2,3,2,4,4,3,4,2,2,2,0,0,2,4,4,4,0,2,2,2,3,11,5,3,0,3,
3,3,2,2,4,4,3,2,2,3,3,3,4,3,2,2,3,2,2,3,3,0,2,2,3,0,3,0,4,1,3,2,2,3,2,1,0,0,2,3,3,2,0,4,2,2,4,5,6,2,6,2,0,7,2,5,0,264,0,3,12,4,438,689,0,24,3,25,2790,9,2796,0,
3,3,2,2,4,8,2,6,4,4,6,1,4,1,2,3,7,3,1,0,3,0,5,2,2,0,4,9,8,3,6,2,5,9,4,6,4,5,7,3,6,2,4,7,4,5,4,5,6,2,6,2,0,7,2,5,0,264,0,3,12,4,438,689,0,24,3,25,2790,9,2796,0,
7,8,3,2,4,8,2,6,4,4,6,1,4,1,2,3,7,3,1,0,3,0,5,2,2,0,4,9,8,3,6,2,5,9,4,6,4,5,7,3,6,2,4,7,4,5,4,5,6,2,6,2,0,7,2,5,0,2799,2828,6,750,6,746,2829,10,2794,4,2794,2826,8,2794,0,
7,8,3,2,4,8,2,6,4,4,6,1,4,1,3,6,10,4,5,0,4,10,11,2,11,8,2,11,12,3,10,2,7,11,4,11,0,6,12,2,9,3,10,12,3,12,4,7,10,2,9,4,315,906,0,181,0,2799,2828,6,750,6,746,2829,10,2794,4,2794,2826,8,2794,0,
6,11,2,3,5,9,3,5,3,7,9,2,5,0,3,6,10,4,5,0,4,10,11,2,11,8,2,11,12,3,10,2,7,11,4,11,0,6,12,2,9,3,10,12,3,12,4,7,10,2,9,4,315,906,0,181,0,2796,2828,8,2796,4,2795,2827,8,2795,3,2793,2826,7,2791,0,
6,11,2,3,5,9,3,5,3,7,9,2,5,0,3,32779,11,3,12,28,3,883,3,2,16,14,2,626,3,3,20,3,9,12,2,10,0,6,12,2,9,3,10,12,3,12,4,7,10,2,9,4,315,906,0,181,0,2796,2828,8,2796,4,2795,2827,8,2795,3,2793,2826,7,2791,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,3,32779,11,3,12,28,3,883,3,2,16,14,2,626,3,3,20,3,9,12,2,10,0,6,12,2,9,3,10,12,3,12,4,7,10,2,9,4,315,906,0,181,0,2796,2828,8,2796,4,2795,2827,8,2795,2,2783,2808,6,2777,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,3,32779,11,3,12,28,3,883,3,2,16,14,2,626,3,3,20,3,9,12,2,10,0,9,11,1,12,4,13,13,2,13,4,10,13,4,11,0,2362,2824,8,2803,0,1257,2828,9,6892,2,2778,2824,8,2793,2,2783,2808,6,2777,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,3,16,13,3,13,10,2,1795,14,3,20,16,2,1257,11,3,23,3,99,0,2,11,0,9,11,1,12,4,13,13,2,13,4,10,13,4,11,0,2362,2824,8,2803,0,1257,2828,9,6892,2,2778,2824,8,2793,2,2783,2808,6,2777,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,3,16,13,3,13,10,2,1795,14,3,20,16,2,1257,11,3,23,3,99,0,2,11,0,8,14,2,10,3,13,14,3,13,3,11,12,4,11,0,2308,2810,8,2778,0,3034,2807,8,6879,4,2780,2808,7,2778,3,2728,2810,8,2780,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,4,17,13,3,12,14,2,2564,22,0,23,18,3,1732,197,0,22,2,310,41,0,12,0,8,14,2,10,3,13,14,3,13,3,11,12,4,11,0,2308,2810,8,2778,0,3034,2807,8,6879,4,2780,2808,7,2778,3,2728,2810,8,2780,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,4,17,13,3,12,14,2,2564,22,0,23,18,3,1732,197,0,22,2,310,41,0,12,0,8,14,2,10,3,13,14,3,13,3,11,12,4,11,0,2308,2810,8,2778,0,3034,2807,8,6879,4,2780,2808,7,2778,3,2728,2810,8,2780,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,4,17,13,3,12,14,2,2564,22,0,23,18,3,1732,197,0,22,2,310,41,0,12,0,8,14,2,10,3,13,14,3,13,3,11,12,4,11,0,2308,2810,8,2778,0,3034,2807,8,6879,4,2780,2808,7,2778,3,2728,2810,8,2780,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,4,17,13,3,12,14,2,2564,22,0,23,18,3,1732,197,0,22,2,310,41,0,12,0,8,14,2,10,3,13,14,3,13,5,8,9,2,4,0,2046,2827,0,1460,722,2287,3871,8,2797,1426,2820,2831,8,2798,0,648,2811,8,3051,0,
6,11,2,4,9,10,3,12,4,9,11,3,10,9,4,17,13,3,12,14,2,2564,22,0,23,18,3,1732,197,0,22,2,310,41,0,12,0,7,9,2,4,5,8,10,3,8,5,8,9,2,4,0,2046,2827,0,1460,722,2287,3871,8,2797,1426,2820,2831,8,2798,0,648,2811,8,3051,0,
9,8,3,524,392,0,4,8,192,0,9,2,8,6,4,17,13,3,12,14,2,2564,22,0,23,18,3,1732,197,0,22,2,310,41,0,12,0,7,9,2,4,5,8,10,3,8,5,8,9,2,4,0,2046,2827,0,1460,0,2798,2829,8,2797,4,2797,2831,10,2796,3,245,2807,7,2797,0,
9,8,3,524,392,0,4,8,192,0,9,2,8,6,2798,2129,778,0,14,9,2793,2827,891,0,17,14,2780,2808,1615,0,16,1490,1705,1014,0,302,0,8,9,3,4,4,8,10,2,8,10,192,72,0,8,6,2123,2806,0,1154,0,2798,2829,8,2797,4,2797,2831,10,2796,3,245,2807,7,2797,0,
10,9,3,902,669,0,4,8,752,0,10,3,6,6,2798,2129,778,0,14,9,2793,2827,891,0,17,14,2780,2808,1615,0,16,1490,1705,1014,0,302,0,8,9,3,4,4,8,10,2,8,10,192,72,0,8,6,2123,2806,0,1154,0,2798,2829,8,2797,4,2797,2831,10,2796,19,34,2797,5,2797,0,
10,9,3,902,669,0,4,8,752,0,10,3,6,6,2798,2129,778,0,14,9,2793,2827,891,0,17,14,2782,2810,2353,0,410,1900,2240,1246,0,526,73,0,8,4,7,11,13,11,3,18,12,332,151,0,6,21,1907,2304,0,771,532,2821,2831,8,2799,1031,2756,2830,1,2799,19,34,2797,5,2797,0,
11,9,4,1435,881,0,3,7,1081,291,0,3,6,4,2780,2808,1496,0,133,0,2779,2811,1608,0,390,0,2782,2810,2353,0,410,1900,2240,1246,0,526,73,0,8,4,7,11,13,11,3,18,12,332,151,0,6,21,1907,2304,0,771,532,2821,2831,8,2799,1031,2756,2830,1,2799,20,28,2465,0,1896,0,
11,9,4,1435,881,0,3,7,1081,291,0,3,6,4,2780,2808,1496,0,133,0,2779,2811,1608,0,390,0,2782,2810,2353,0,410,1900,2240,1246,0,526,280,0,9,4,6,11,13,9,2,7,11,140,48,0,5,20,1043,1506,0,262,5,1718,2709,0,2001,396,1348,1720,0,1224,20,28,2465,0,1896,0,
145,0,4,2188,1165,5,3,6,1427,1094,159,0,6,2,2781,2811,2355,0,329,0,2783,2813,2602,0,971,0,2799,2830,2834,1,778,2213,2684,1536,0,794,280,0,9,4,6,11,13,9,2,7,11,140,48,0,5,20,1043,1506,0,262,5,1718,2709,0,2001,396,1348,1720,0,1224,20,28,2465,0,1896,0,
145,0,4,2188,1165,5,3,6,1427,1094,159,0,6,2,2781,2811,2355,0,329,0,2783,2813,2602,0,971,0,2799,2830,2834,1,778,2213,2684,1536,0,794,0,14,1,0,5,2,14,10,2,6,3,10,7,4,5,4,246,483,0,5,0,636,930,0,421,14,13,174,0,10,22,26,1261,0,482,0,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,3,2799,2830,0,753,0,2795,2830,2831,9,2166,0,2148,2824,2831,8,1521,1241,2821,1760,0,1072,0,14,1,0,5,2,14,10,2,6,3,10,7,4,5,4,246,483,0,5,0,636,930,0,421,14,13,174,0,10,22,26,1261,0,482,0,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,3,2799,2830,0,753,0,2795,2830,2831,9,2166,0,2148,2824,2831,8,1521,1241,2821,1760,0,1072,0,14,1,0,5,2,14,10,2,6,4,13,8,2,6,2,13,9,2,5,0,3,8,3,5,3,12,10,3,5,3,23,284,0,9,3,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,4,2799,2831,8,1632,0,6,2797,2829,9,2797,11,0,2795,2828,7,2151,3,2435,1556,0,1189,0,14,9,3,5,3,15,10,3,6,4,13,8,2,6,2,13,9,2,5,0,3,8,3,5,3,12,10,3,5,3,23,284,0,9,3,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,4,2799,2831,8,1632,0,6,2797,2829,9,2797,11,0,2795,2828,7,2151,3,2435,1556,0,1189,0,14,9,3,5,3,15,10,3,6,4,13,8,2,6,2,13,9,2,5,0,13,8,3,6,2,12,9,4,6,4,21,196,0,8,2,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,1,2796,1805,9,1688,0,0,2797,2829,9,2797,65,0,2799,2829,8,1144,3,807,349,0,40,0,12,9,2,1,3,14,8,3,7,3,14,8,3,5,2,13,9,4,5,0,13,8,3,6,2,12,9,4,6,4,21,196,0,8,2,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,1,2796,1805,9,1688,0,0,2797,2829,9,2797,65,0,2799,2829,8,1144,3,807,349,0,40,0,12,9,2,1,3,14,8,3,7,3,14,8,3,5,2,13,9,4,5,0,8,7,3,2,3,8,6,3,4,4,19,86,0,6,3,
556,0,2,3,1877,13,2,8,344,2080,633,0,10,2,3,2797,135,0,273,0,0,2797,840,0,524,0,0,884,0,4,6,4,8,4,2,5,0,7,5,3,4,3,12,5,2,5,3,9,5,2,4,3,10,5,3,5,0,8,7,3,2,3,8,6,3,4,4,19,86,0,6,3,
242,0,3,5,1424,1,4,0,4,515,0,2,2,3,3,2797,135,0,273,0,0,2797,840,0,524,0,0,884,0,4,6,4,8,4,2,5,0,7,5,3,4,3,12,5,2,5,3,9,5,2,4,3,10,5,3,5,0,2,4,4,2,4,1,3,2,2,4,24,34,0,2,3,
242,0,3,5,1424,1,4,0,4,515,0,2,2,3,3,2797,135,0,273,0,0,2797,840,0,524,0,454,12,3,3,4,3,4,2,2,2,0,1,3,3,4,4,0,3,2,3,2,3,3,4,2,4,2,2,2,2,0,2,4,4,2,4,1,3,2,2,4,24,34,0,2,3,
1,4,4,4,3,2,3,4,3,0,3,3,3,3,0,0,2,2,4,3,25,641,21,4,0,0,454,12,3,3,4,3,4,2,2,2,0,1,3,3,4,4,0,3,2,3,2,3,3,4,2,4,2,2,2,2,0,2,4,4,2,4,1,3,2,2,0,45,174,0,0,4,
1,4,4,4,3,2,3,4,3,0,3,3,3,3,0,0,2,2,4,3,25,641,21,4,0,0,454,12,3,3,4,3,4,2,2,2,4,0,3,3,3,3,0,4,3,3,3,2,2,3,3,3,4,2,2,2,0,0,2,3,4,3,0,0,3,3,0,45,174,0,0,4,
1,4,4,4,3,2,3,4,3,0,3,3,3,3,0,0,2,3,3,3,1,176,6,3,0,0,294,66,0,2,0,3,3,3,3,2,4,0,3,3,3,3,0,4,3,3,3,2,2,3,3,3,4,2,2,2,0,0,2,3,4,3,0,0,3,3,0,45,174,0,0,4,
1,4,4,4,3,2,3,4,3,0,3,3,3,3,0,0,2,3,3,3,1,176,6,3,0,0,294,66,0,2,0,3,3,3,3,2,0,0,2,2,2,2,0,4,3,2,3,2,2,3,3,4,2,3,2,2,0,0,2,4,4,3,0,0,2,2,2,45,141,0,0,2,
};

 extern u16 ADC_ConvertedValue[channelnum];
 extern u16 Time_count;
 u16 data[9][8];

int main()
{	
	u16 ADC_max=0,adcnew=0;
	static float tempr;
//	short cx,cy,cz,Acc_x_cali=0,Acc_y_cali,Acc_z_cali,Gyr_x_cali=0,Gyr_y_cali=0,Gyr_z_cali=0;
//	float aacx=0, aacy=0, aacz=0, x ,y, z;
	u8 str[20], select_num=0,press=0;
	u8 send_buf[SEND_BUF_SIZE],count=0;
	u8 t=0,i=0,j,k;
	u32 temp=0;
	u16 time=0;
	delay_init(72);
	LED_Init();
	KEY_Init();
	Select_Init();
	LED_debug();
	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_2);
	uart_init(9600);
	Adc_Init();
	MYDMA_Config(DMA1_Channel4,(u32)&USART1->DR,(u32)send_buf,SEND_BUF_SIZE);
//	MYDMA_Config(DMA1_Channel7,(u32)&USART2->DR,(u32)send_buf,SEND_BUF_SIZE);
	TIM3_Int_Init(999,71);
	
//	MPU_Init();	
//	delay_ms(100);
//	MPU_ACC_Cali(100,&Acc_x_cali,&Acc_y_cali,&Acc_z_cali);
//	MPU_Gyr_Cali(100,&Gyr_x_cali,&Gyr_y_cali,&Gyr_z_cali);
//	//校准

	
//	NRF24L01_Init(); 
//	while(NRF24L01_Check())
//	{
//		LED1( LED_ON );
//	}
//	LED1( LED_OFF );
//	NRF24L01_TX_Mode();
	
//	uart2_init(9600);
	
	printf("Test success!\r\n");
  while(1)
  {		
//		if(KEY0==0)
//		{
//			press = 1;
//		}
//		else if(KEY0==1 && press == 1)
//		{
//			select_num++;
//			if(select_num >= 8)
//				select_num=0;
//			press = 0;
//		}
//		Slect(select_num);
		
//		adcnew = ADC_ConvertedValue[0];
//		if(adcnew > ADC_max)
//		{
//			ADC_max = adcnew;
//		}
//		if(++i>=15)
//		{
//			sprintf((char*)str, "%d \r\n", ADC_max);
////			printf(str);
//			ADC_max=0;
//			i=0;
//		}
			


//		TIM_Cmd(TIM3, ENABLE);
		send_buf[0]=3+2*data_len;
		send_buf[1]=0xFA;
		send_buf[2]=count++;
	


		for(j=0;j<72;j++)
		{
			send_buf[3+2*j] = (u8)((u32)data0[72*i+j]>>4);
			send_buf[3+2*j+1] = (u8)((u32)data0[72*i+j] & 0x0f)<<4;
		}
		i++;
		if(i>71)
		{
			i=0;
		}




		/*
		ADC1 ADC1 ...  ADC1
		ADC2 ...  ...  ADC2
		 .  .           .
		 .    .         .
		 .      .       .
		ADC9 ... ...  ADC9
		*/

//			for(j=0;j<8;j++)
//			{
//				Slect(j);
//				delay_us(50);
//				for(k=0;k<9;k++)
//				{
//					temp = ADC_ConvertedValue[k];
//					if(temp>data[k][j])
//					{
//						data[k][j] = temp;
//					}	
//				}
//				
////				send_buf[3+2*j] = (u8)((u32)ADC_ConvertedValue[0]>>4);
////				send_buf[3+2*j+1] = (u8)((u32)ADC_ConvertedValue[0] & 0x0f)<<4;
//			}

//		
//		for(k=0;k<9;k++)
//		{
//			for(j=0;j<8;j++)
//				{
//					send_buf[3+2*j+16*k] = (u8)((u32)data[k][j]>>4);
//					send_buf[3+2*j+16*k+1] = (u8)((u32)data[k][j] & 0x0f)<<4;
//					data[k][j] = 0;
//				}
//		}
//		
		
		
		
//		for(i=0;i<20;i++)
//		{
//			select_num=0;
//			for(j=0;j<8;j++)
//			{
//				Slect(select_num);
//				delay_us(50);
//				temp = ADC_ConvertedValue[0];
//				if(temp>data[j])
//				{
//					data[j] = temp;
//				}
//				send_buf[3+2*j] = (u8)((u32)ADC_ConvertedValue[0]>>4);
//				send_buf[3+2*j+1] = (u8)((u32)ADC_ConvertedValue[0] & 0x0f)<<4;
//				select_num++;
//	//			sprintf((char*)str, "%d  ", ADC_ConvertedValue[0]);
//	//			printf(str);
//			}
//		}
		
//		for(i=0;i<8;i++)
//		{
//			send_buf[3+2*i] = (u8)((u32)data[i]>>4);
//			send_buf[3+2*i+1] = (u8)((u32)data[i] & 0x0f)<<4;
//			sprintf((char*)str, "%4d  ", data[i]);
//			printf(str);
//			data[i] = 0;
//		}
//		printf("\r\n");
		
		USART_DMACmd(USART1,USART_DMAReq_Tx,ENABLE);
		MYDMA_Enable(DMA1_Channel4);
		
		
		while(1)
		{
			if(DMA_GetFlagStatus(DMA1_FLAG_TC4)!=RESET)	//判断通道4传输完成
			{
				DMA_ClearFlag(DMA1_FLAG_TC4);//清除通道4传输完成标志
				break; 
			}
		}
		
//		USART_DMACmd(USART2,USART_DMAReq_Tx,ENABLE);
//		MYDMA_Enable(DMA1_Channel7);
//		while(1)
//		{
//			if(DMA_GetFlagStatus(DMA1_FLAG_TC7)!=RESET)	//判断通道7传输完成
//			{
//				DMA_ClearFlag(DMA1_FLAG_TC7);//清除通道7传输完成标志
//				break; 
//			}
//		}

//		TIM_Cmd(TIM3, DISABLE);
//			sprintf((char*)str, "%d  \r\n", Time_count);
//			printf(str);
//		Time_count=0;

//		printf(send_buf);
		
		//tempr = MPU_Get_Temperature()/100.0;
		
		
//		MPU_Get_Accelerometer(&cx,&cy,&cz);
//		aacx = (cx-Acc_x_cali)*9.8*2/32768.0, aacy=(cy-Acc_y_cali)*9.8*2/32768.0, aacz = (cz-Acc_z_cali)*9.8*2/32768.0;

//		
//		MPU_Get_Gyroscope(&cx,&cy,&cz);
//		x=((double)cx-Gyr_x_cali)*2000/32768, y=(cy-Gyr_y_cali)*2000/32768, z=(cz-Gyr_z_cali)*2000/32768;

//		
//		sprintf((char*)send_buf, "C0:%fv  C1:%fv Gyro:%.3f %.3f %.3f Acc:%.5f %.5f %.5f\r\n", \
//			(float)ADC_ConvertedValue[0]/4095*3.3, (float)ADC_ConvertedValue[1]/4095*3.3, \
//			(float)x, (float)y, (float)z, (float)aacx, (float)aacy, (float)aacz);
//	
		delay_ms(100);
		t=!t;
		LED1(t);
			
	}
}
/******************* (C) COPYRIGHT 2018 END OF FILE *****************************/

